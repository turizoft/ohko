var _base,_base1,_base2;window.traverse_object=function(a,b){var c,d;d=[];for(c in a)b(c,a),d.push(a[c]instanceof Object?traverse_object(a[c],b):void 0);return d},null==(_base=String.prototype).startsWith&&(_base.startsWith=function(a){return this.slice(0,a.length)===a}),null==(_base1=String.prototype).endsWith&&(_base1.endsWith=function(a){return""===a||this.slice(-a.length)===a}),null==(_base2=String.prototype).replaceAll&&(_base2.replaceAll=function(a,b){return this.split(a).join(b)});var clean_parameters,_sync;_sync=Backbone.sync,clean_parameters=function(a,b){return("response_errors"===a||"saving"===a||"selected"===a||"loading"===a||"_destroy"===a&&!b._destroy)&&delete b[a],b[a]instanceof Array&&0===b[a].length?delete b[a]:void 0},Backbone.sync=function(a,b,c){var d,e;return null!=c.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(c.contentType="application/json",d="",b.paramRoot?(d={},d[b.paramRoot]=b.toJSON(c),traverse_object(d[b.paramRoot],clean_parameters)):(d=b.toJSON(),traverse_object(d,clean_parameters)),c.data=JSON.stringify(d)),e=_.extend({beforeSend:function(a){var b,c;return null!=ohko.app.has_session&&(b=ohko.app.session.get("access_token"),c="Token token="+b,ohko.app.session.is_authenticated())?a.setRequestHeader("Authorization",c):void 0}},c),e.error=function(a){var b,d;return 401===a.status&&(null!=(b=ohko.app.session)?b.is_authenticated():void 0)&&null!=(d=ohko.app.router)&&d.needs_logging_out(),"function"==typeof c.error?c.error(a):void 0},_sync.call(this,a,b,e)},Backbone.Router.prototype.before=function(){},Backbone.Router.prototype.after=function(){},Backbone.Router.prototype.route=function(a,b,c){var d;return _.isRegExp(a)||(a=this._routeToRegExp(a)),_.isFunction(b)&&(c=b,b=""),c||(c=this[b]),d=this,Backbone.history.route(a,function(e){var f,g;f=d._extractParameters(a,e),d.render_action=!0,g=[arguments[0],b],d.before.apply(d,g),d.skip_original_action||c&&c.apply(d,f),d.after.apply(d,g),d.trigger.apply(d,["route:"+b].concat(f)),d.trigger("route",b,f),Backbone.history.trigger("route",d,b,f)}),this};var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(a){ohko.Model=function(a){function b(a,c){var d,e,f,g;for(b.__super__.constructor.call(this,a,c),this.previous_attributes=_.clone(this.attributes),this.set("selected",!1),this.set("saving",!1),this.set("loading",!1),this.set("_destroy",!1),this.on("change",function(a){return function(){return a.unsaved=!0}}(this)),this.on("sync",function(a){return function(){return a.unsaved=!1}}(this)),g=this.getRelations(),e=0,f=g.length;f>e;e++)d=g[e],this.on("add:"+d.key,function(a){return function(b){var c;return(null!=(c=b.previous_attributes)?c[null!=d.reverseRelation.key]:void 0)&&delete b.previous_attributes[d.reverseRelation.key],a.listenTo(b,"change",function(){return a.unsaved=!0})}}(this))}return __extends(b,a),b.prototype.has_response_errors=function(){var a,b;this.set("response_errors",{},{silent:!0}),b=[];for(a in this.attributes)b.push("id"!==a&&"saving"!==a&&"selected"!==a?this.get("response_errors")[a]=[]:void 0);return b},b.prototype.reset=function(){return this.set(_.clone(this.defaults()))},b.prototype.revert=function(){var a,b,c,d,e,f;for(this.set(this.previous_attributes),this.unsaved=!1,e=this.getRelations(),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(null!=this.get(b.key)&&null!=this.get(b.key).models?function(){var c,d,e,f;for(e=this.get(b.key).models,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.revert());return f}.call(this):void 0);return f},b.prototype.reset_errors=function(){var a,b,c,d,e,f;for(this.set("response_errors",this.defaults.response_errors),e=this.getRelations(),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(null!=this.get(b.key)&&null!=this.get(b.key).models?function(){var c,d,e,f;for(e=this.get(b.key).models,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.reset_errors());return f}.call(this):void 0);return f},b.prototype.has_errors=function(){var a,b,c;c=this.get("response_errors");for(b in c)if(a=c[b],0!==a.length)return!0;return!1},b.prototype.add_errors=function(a){var b,c,d,e,f,g,h,i;if(null!=this.getRelations()){i=_.pluck(this.getRelations(),"key"),h=this.getRelations();for(f in a)if(g=a[f],__indexOf.call(i,f)>=0){for(b in g){c=g[b];for(d in c)e=c[d],this.get(f).models[d].add_errors(e)}delete a[f]}}return this.set("response_errors",a)},b.prototype.safe_clone_from=function(a){var b;return b=_.clone(a.attributes),delete b.id,this.set(b)},b.prototype.autosaves=function(a){var b,c;return null==a&&(a={}),b=null!=(c=a.interval)?c:3e3,this.on("change",function(a){return function(){var c;return a.unsaved=!0,clearTimeout(a.countdown),c=a.changedAttributes(),1!==Object.keys(c).length||null==c.saving?a.countdown=setTimeout(function(){return a.save_model({progress:!0})},b):void 0}}(this)),this.on("sync",function(a){return function(){return a.unsaved=!1,clearTimeout(a.countdown)}}(this))},b.prototype.fetch_model=function(a){var b,c;return null==a&&(a={}),ohko.app.onProgressStart(),b=null!=(c=a.delay)?c:0,this.set("loading",!0),setTimeout(function(b){return function(){return b.fetch({success:function(){return"function"==typeof a.success&&a.success(),b.set("loading",!1),"function"==typeof a.after&&a.after(),ohko.app.onProgressEnd()},error:function(){return"function"==typeof a.error&&a.error(),b.set("loading",!1),"function"==typeof a.after&&a.after(),a.error_message&&ohko.app.show_alert(a.error_message),ohko.app.onProgressEnd()}})}}(this),b)},b.prototype.save_model=function(a){var b,c;return null==a&&(a={}),ohko.app.onProgressStart(),b=null!=(c=a.delay)?c:0,this.unsaved?(this.set("saving",!0),"function"==typeof a.before&&a.before(),setTimeout(function(b){return function(){return b.save(null,{success:function(c,d,e){return a.success_message&&ohko.app.show_alert(a.success_message),"function"==typeof a.success&&a.success(c,d,e),b.set("saving",!1),"function"==typeof a.after&&a.after(),ohko.app.onProgressEnd()},error:function(c,d){var e;return a.error_message&&ohko.app.show_alert(a.error_message),b.add_errors(null!=(e=d.responseJSON)?e.errors:void 0),"function"==typeof a.error&&a.error(c),b.set("saving",!1),"function"==typeof a.after&&a.after(),ohko.app.onProgressEnd()}})}}(this),b)):(a.not_changed_message&&ohko.app.show_alert(a.not_changed_message),"function"==typeof a.not_changed?a.not_changed():void 0)},b.prototype.delete_model=function(a){return null==a&&(a={}),ohko.app.onProgressStart(),this.destroy({success:function(){return function(){return"function"==typeof a.success&&a.success(),"function"==typeof a.after&&a.after(),ohko.app.onProgressEnd()}}(this),error:function(){return function(){return"function"==typeof a.error&&a.error(),"function"==typeof a.after&&a.after(),ohko.app.onProgressEnd()}}(this)})},b.prototype.mark_for_deletion=function(){return this.set("_destroy",!0)},b.has_many=function(a,b){var c,d;return null==b&&(b={}),c=b.model,d={type:Backbone.HasMany,key:a,keyDestination:""+a+"_attributes",relatedModel:c,collectionType:""+c+"List",reverseRelation:{includeInJSON:!1}},d.reverseRelation.key=null!=b?b.inverse:void 0,d},b.has_one=function(a,b){var c,d;return null==b&&(b={}),c=b.model,d={type:Backbone.HasOne,key:a,keyDestination:""+a+"_attributes",relatedModel:c,reverseRelation:{includeInJSON:!1}},d.reverseRelation.key=null!=b?b.inverse:void 0,d},b}(Backbone.RelationalModel),a.ohko.Model=ohko.Model}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){ohko.Collection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.select_all=function(){return _.invoke(this.models,"set","selected",!0)},b.prototype.unselect_all=function(){return _.invoke(this.models,"set","selected",!1)},b.prototype.invert_selection=function(){return this.each(function(a){return a.set("selected",!a.get("selected"))})},b.prototype.sort_by=function(a,b){return this.sort_attribute=a,this.sort_direction=null!=b?b:"asc",this.comparator=a,this.sort(),"desc"===this.sort_direction?this.set(this.models.reverse(),{sort:!1}):void 0},b.prototype.toggle_sort=function(a){var b;return b=a===this.sort_attribute?{asc:"desc",desc:"asc"}[this.sort_direction]:"asc",sort_by(a,b)},b}(Backbone.Collection),a.ohko.Collection=ohko.Collection}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){ohko.PageableCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.select_all=function(){return _.invoke(this.models,"set","selected",!0)},b.prototype.unselect_all=function(){return _.invoke(this.models,"set","selected",!1)},b.prototype.invert_selection=function(){return this.each(function(a){return a.set("selected",!a.get("selected"))})},b.prototype.fetch_options=function(){return"none"!==this.sort_direction?{data:{sort_attribute:this.sort_attribute,sort_direction:this.sort_direction}}:void 0},b.prototype.sort_by=function(a,b){return this.sort_attribute=a,this.sort_direction=null!=b?b:"asc",this.gotoFirstPage()},b.prototype.toggle_sort=function(a){return a===this.sort_attribute?this.sort_direction={asc:"desc",desc:"none",none:"asc"}[this.sort_direction]:(this.sort_attribute=a,this.sort_direction="asc"),this.gotoFirstPage()},b.prototype.parseRecords=function(a){return a.collection},b.prototype.parseLinks=function(a){var b,c,d,e;return b=/[\s'"]/g,c=/[<>\s'"]/g,d={},a.meta.links&&(e=["first","prev","next"],_.each(a.meta.links.split(","),function(a){var f,g,h;return f=a.split(";"),h=f[0].replace(c,""),g=f.slice(1),_.each(g,function(a){var c,f,g;return f=a.split("="),c=f[0].replace(b,""),g=f[1].replace(b,""),"rel"===c&&_.contains(e,g)?d[g]=h:void 0})})),d},b.prototype.parseState=function(a){return{totalRecords:a.meta.total_entries,totalPages:a.meta.total_pages,pageSize:a.meta.page_size}},b.prototype.sync=function(a,c,d){var e;return ohko.app.onProgressStart(),e=d.success,d.success=function(a,b,c){return"function"==typeof e&&e(a,b,c),ohko.app.onProgressEnd()},b.__super__.sync.call(this,a,c,d)},b.prototype.gotoFirstPage=function(a){var b;return b=this.fetch_options(),b.success=null!=a?a.success:void 0,b.error=null!=a?a.error:void 0,this.getFirstPage(b)},b.prototype.gotoNextPage=function(){return this.getNextPage(this.fetch_options())},b.prototype.gotoPreviousPage=function(){return this.getPreviousPage(this.fetch_options())},b.prototype.gotoPage=function(a){return this.getPage(a,this.fetch_options)},b}(Backbone.PageableCollection),a.ohko.PageableCollection=ohko.PageableCollection}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){ohko.Session=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.paramRoot="session",b.prototype.urlRoot=function(){return ohko.app.server_api("sessions")},b.prototype.initialize=function(){return this.has_response_errors()},b.prototype.defaults=function(){return{username:null,password:null,access_token:null,remember_me:!1,authenticated:!1,redirect_url:null,activation_state:"pending"}},b.prototype.is_authenticated=function(){return this.get("authenticated")},b.prototype.is_active=function(){return"active"===this.get("activation_state")},b.prototype.logout=function(){return this.set_authenticated(!1)},b.prototype.set_authenticated=function(a,b){var c,d;return null==b&&(b={}),this.set("authenticated",a),a?(this.save_access_token(b.access_token),this.save_activation_state(b.activation_state),null!=(c=ohko.app.current_user)?c.fetch():void 0):(this.set("access_token",null),this.delete_storage(),null!=(d=ohko.app.current_user)?d.reset():void 0)},b.prototype.login=function(a){return null==a&&(a={}),a.success=function(a){return function(b,c){return a.set_authenticated(!0,{access_token:c.access_token,activation_state:c.activation_state}),"function"==typeof a.login_successful?a.login_successful():void 0}}(this),a.error=function(a){return function(){return"function"==typeof a.login_failed?a.login_failed():void 0}}(this),this.save_model(a)},b.prototype.get_storage=function(){return this.get("remember_me")?localStorage:sessionStorage},b.prototype.access_token_in_storage=function(){return null!=this.get_storage().getItem(ohko.app.access_token_name)},b.prototype.save_access_token=function(a){return this.set("access_token",a),this.get_storage().setItem(ohko.app.access_token_name,a)},b.prototype.save_activation_state=function(a){return this.set("activation_state",a),this.get_storage().setItem("activation_state",a)},b.prototype.try_to_restore_from_storage=function(){return this.access_token_in_storage()?(this.set("remember_me",null!=localStorage.getItem(ohko.app.access_token_name)),this.set_authenticated(!0,{access_token:this.get_storage().getItem(ohko.app.access_token_name),activation_state:this.get_storage().getItem("activation_state")}),"function"==typeof this.login_successful?this.login_successful():void 0):void 0},b.prototype.delete_storage=function(){return this.get_storage().removeItem(ohko.app.access_token_name),this.get_storage().removeItem("activation_state")},b}(ohko.Model),a.ohko.Session=ohko.Session}(window),function(a){ohko.Application=function(){function a(a){var b;null==a&&(a={}),ohko.app=this,null!=a.server_url&&(this.server_url=a.server_url),null!=a.access_token_name&&(this.access_token_name=a.access_token_name),this.set_global_timeout(null!=(b=a.ajax_timeout)?b:2e4)}return a.prototype.server=function(a){return""+this.server_url+"/"+a},a.prototype.server_api=function(a){return""+this.server_url+"/api/"+a},a.prototype.set_global_timeout=function(a){return $.ajaxSetup({timeout:a})},a.prototype.has_session=function(){return null!=this.session},a.prototype.has_navigation=function(){return null!=this.navigation},a.prototype.has_router=function(){return null!=this.router},a.prototype.onSessionExpired=function(){},a.prototype.onProgressStart=function(){},a.prototype.onProgressEnd=function(){},a.prototype.call_frameworks=function(){},a.prototype.show_alert=function(a){return alert(a)},a}(),a.ohko.Application=ohko.Application}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(a){ohko.Router=function(b){function c(a){var b,d,e,f,g,h,i;for(c.__super__.constructor.call(this),null!=a&&(this.options=a),null==(d=this.options).redirect_after_login&&(d.redirect_after_login=!1),this.pages_container=$(null!=(g=this.options.pages_container)?g:"#pages"),this.page_container=$(null!=(h=this.options.page_container)?h:"#page-container"),this.z=10,this.template_cache={},this.needs_render_template=!0,i=this.cached_templates,e=0,f=i.length;f>e;e++)b=i[e],this.template_cache[b]=!1,this.pages_container.append("<div class='page-cache hidden' id='cache_"+b+"'></div>")}return __extends(c,b),c.prototype.skip_login_for=["all"],c.prototype.skip_activation_for=["all"],c.prototype.redirect_if_logged_in_for=[],c.prototype.redirect_if_active_for=[],c.prototype.cached_templates=[],c.prototype.before=function(a,b){return this.action=b,this.redirect_if_logged_in(this.action),this.redirect_if_active(this.action),this.require_login(this.action),this.require_activation(this.action),this.needs_render_template=this.action?!this.template_cache[this.action]:!0,this.needs_render_template&&(this.template_cache[this.action]=!0),this.skip_original_action?this[this.action]():void 0},c.prototype.after=function(){var a,b,c;return a=null,$(".page-cache").addClass("hidden"),this.page_container.addClass("hidden"),b=this.action,__indexOf.call(this.cached_templates,b)>=0?(a=$("#cache_"+this.action),this.needs_render_template&&a.html(this.html),a.removeClass("hidden")):(this.page_container.html(this.html),this.page_container.removeClass("hidden")),this.html=null,setTimeout(function(a){return function(){return $(".page-cache .content").css("z-index",a.z),a.z=a.z+1}}(this),0),null!=(c=ohko.app.navigation)&&c["goto"](this.action),ohko.app.call_frameworks(this.page_container)},c.prototype.require_login=function(a){return __indexOf.call(this.skip_login_for,"all")<0&&ohko.app.has_session&&!ohko.app.session.is_authenticated()&&__indexOf.call(this.skip_login_for,a)<0?(this.skip_original_action=!0,this.navigate_to_login()):void 0},c.prototype.require_activation=function(a){return __indexOf.call(this.skip_activation_for,"all")<0&&ohko.app.has_session&&!ohko.app.session.is_active()&&__indexOf.call(this.skip_activation_for,a)<0?(this.skip_original_action=!0,this.navigate_to_activation()):void 0},c.prototype.redirect_if_logged_in=function(a){var b;return(null!=(b=ohko.app.session)?b.is_authenticated():void 0)&&__indexOf.call(this.redirect_if_logged_in_for,a)>=0?(this.skip_original_action=!0,this.navigate_to_home()):void 0},c.prototype.redirect_if_active=function(a){var b;return(null!=(b=ohko.app.session)?b.is_active():void 0)&&__indexOf.call(this.redirect_if_active_for,a)>=0?(this.skip_original_action=!0,this.navigate_to_home()):void 0},c.prototype.logout=function(a){var b;return null==a&&(a={trigger:!1,url:null}),null!=(b=ohko.app.session)&&b.logout(),this.navigate_to_login(),this.sessions_new()},c.prototype.needs_logging_out=function(){return setTimeout(function(a){return function(){return a.goto_unathorized({expired:!0})}}(this),500)},c.prototype.goto_unathorized=function(b){var c,d;return null==b&&(b={}),null!=ohko.app.has_session()?(c=null!=(d=b.expired)?d:!1,this.options.redirect_after_login&&ohko.app.session.set("redirect_url",""+encodeURIComponent(a.location.hash)),this.navigate(this.logout_path,{trigger:!0}),ohko.app.onSessionExpired()):void 0},c.prototype.navigate_to_login=function(){return this.navigate(this.options.login_path,{trigger:!1,replace:!0}),null!=this.options.login_action?this.action=this.options.login_action:void 0},c.prototype.navigate_to_activation=function(){return this.navigate(this.options.activation_path,{trigger:!1,replace:!0}),null!=this.options.activation_action?this.action=this.options.activation_action:void 0},c.prototype.navigate_to_home=function(){return this.navigate(this.options.home_path,{trigger:!1,replace:!0}),null!=this.options.home_action?this.action=this.options.home_action:void 0},c}(Backbone.Router),a.ohko.Router=ohko.Router}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){ohko.Profile=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.paramRoot="user",b.prototype.urlRoot=function(){return ohko.app.server_api("user/profile")},b.prototype.url=function(){return this.urlRoot()},b.prototype.initialize=function(){return this.has_response_errors()},b.prototype.defaults=function(){return{email:null,username:null,activation_state:null,current_password:null,password:null,password_confirmation:null}},b}(ohko.Model),a.ohko.Profile=ohko.Profile}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(a){ohko.Navigation=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.hide_header_for=[],b.prototype.hide_footer_for=["all"],b.prototype.hide_floating_button_for=["all"],b.prototype.keep_search_bar_for=[],b.prototype.defaults=function(){return{section:"",visible:!0,footer_visible:!0,floating_button_visible:!0,searching:!1}},b.prototype["goto"]=function(a){return this.set("section",a),this.set("header_visible",this.is_header_visible(a)),this.set("footer_visible",this.is_footer_visible(a)),this.set("floating_button_visible",this.is_floating_button_visible(a)),this.keep_search_bar(a)?void 0:(this.set("searching",!1),$(null!=this.get("search_box_selector")).blur())},b.prototype.is_header_visible=function(a){return __indexOf.call(this.hide_header_for,"all")<0&&__indexOf.call(this.hide_header_for,a)<0},b.prototype.is_footer_visible=function(a){return __indexOf.call(this.hide_footer_for,"all")<0&&__indexOf.call(this.hide_footer_for,a)<0},b.prototype.is_floating_button_visible=function(a){return __indexOf.call(this.hide_floating_button_for,"all")<0&&__indexOf.call(this.hide_floating_button_for,a)<0},b.prototype.keep_search_bar=function(a){return __indexOf.call(this.keep_search_bar_for,a)>=0},b}(Backbone.Model),a.ohko.Navigation=ohko.Navigation}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(a){ohko.ViewModel=function(a){function b(){this.errors={},this.show_errors={},this.has_errors={}}return __extends(b,a),b.prototype.bind=function(a,b){var c,d,e,f,g,h;for(null==b&&(b={}),h=[],e=0,f=a.length;f>e;e++)d=a[e],c=(null!=(g=b.namespace?""+b.namespace+"_":void 0)?g:"")+d,h.push(this[c]=kb.observable(b.from,d));return h},b.prototype.bind_all=function(a){var b,c,d,e,f;null==a&&(a={}),f=[];for(c in a.from.attributes)d=a.except||[],__indexOf.call(d,c)<0?(b=(null!=(e=a.namespace?""+a.namespace+"_":void 0)?e:"")+c,f.push(this[b]=kb.observable(a.from,c))):f.push(void 0);return f},b.prototype.expose=function(a,b){var c,d,e,f,g,h;for(null==b&&(b={}),h=[],e=0,f=a.length;f>e;e++)d=a[e],c=(null!=(g=b.namespace?""+b.namespace+"_":void 0)?g:"")+d,h.push(this[c]=function(){return b.from[d]});return h},b.prototype.bind_errors_for=function(a,b){var c;return null==b&&(b={}),c=b.namespace,this.errors[c]=ko.computed(function(){return kb.triggeredObservable(a,"change sync")(),_.reduce(a.get("response_errors"),function(a,b,c){var d;return a[c]=null!=(d=b[0])?d:"",a},{})}),this.show_errors[c]=ko.computed(function(){return kb.triggeredObservable(a,"change sync")(),_.reduce(a.get("response_errors"),function(a,b,c){return a[c]=null!=b[0],a},{})}),this.has_errors[c]=ko.computed(function(b){return function(){return b.errors[c](),a.has_errors()}}(this))},b.prototype.indexes=function(a,b){var c,d,e,f,g,h,i;return b.act_as||(b.act_as=[]),e=null!=(g=b.filter_fn)?g:function(){return!0},f=function(a){return e(a)&&(__indexOf.call(b.act_as,"remote_deletable")>=0?!a.get("_destroy"):!0)},c=null!=(h=b.collection)?h:"items",this[""+c+"_l"]=a,this[c]=kb.collectionObservable(this[""+c+"_l"],{view_model:b.view_model,filters:f}),this[""+c+"_changed"]=kb.triggeredObservable(this[""+c+"_l"],"change sort add remove reset"),this[""+c+"_empty"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),!a[""+c+"_l"].length}}(this)),this["total_"+c]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),numeral(a[""+c+"_l"].length).format("0a")}}(this)),__indexOf.call(b.act_as,"selectable")>=0&&(this[""+c+"_selected_count"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),a[""+c+"_l"].where({selected:!0}).length}}(this)),this[""+c+"_selection_exists"]=ko.computed(function(a){return function(){return a[""+c+"_selected_count"]>0}}(this)),this[""+c+"_selection_empty"]=ko.computed(function(a){return function(){return 0===a[""+c+"_selected_count"]}}(this)),this["select_all_"+c]=function(){return this[""+c+"_l"].selectAll()},this["unselect_all_"+c]=function(){return this[""+c+"_l"].unselectAll()},this["invert_"+c+"_selection"]=function(){return this[""+c+"_l"].invertSelection()}),__indexOf.call(b.act_as,"paginable")>=0&&(d=null!=(i=this[""+c+"_l"].pageableCollection)?i:this[""+c+"_l"],this[""+c+"_has_next_page"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),d.hasNextPage()}}(this)),this[""+c+"_has_prev_page"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),d.hasPreviousPage()}}(this)),this[""+c+"_lower_bound"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),(d.state.currentPage-1)*d.state.pageSize+1}}(this)),this[""+c+"_upper_bound"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),Math.min(d.state.currentPage*d.state.pageSize,d.state.totalRecords)}}(this)),this[""+c+"_total_items"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),numeral(d.state.totalRecords).format("0a")}}(this)),this[""+c+"_total_pages"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),d.state.totalPages}}(this)),this[""+c+"_current_page"]=ko.computed({read:function(a){return function(){return a[""+c+"_changed"](),d.state.currentPage}}(this),write:function(){return function(a){return d.gotoPage(parseInt(a))}}(this)}),this["on_prev_"+c+"_page"]=function(){return d.gotoPreviousPage()},this["on_next_"+c+"_page"]=function(){return d.gotoNextPage()}),__indexOf.call(b.act_as,"sortable")>=0?(this[""+c+"_sort_attribute"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),a[""+c+"_l"].sort_attribute}}(this)),this[""+c+"_sort_direction"]=ko.computed(function(a){return function(){return a[""+c+"_changed"](),a[""+c+"_l"].sort_direction}}(this)),this[""+c+"_sorted_by"]=function(a){return function(b,d){return ko.computed(function(){return a[""+c+"_changed"](),a.sort_attribute()===b?a.sort_direction()===d:"none"===d})}}(this)):void 0},b}(kb.ViewModel),a.ohko.ViewModel=ohko.ViewModel}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){ohko.NavigationViewModel=function(b){function c(){c.__super__.constructor.call(this),this.bind(["header_visible","footer_visible","floating_button_visible","searching","section"],{from:ohko.app.navigation}),ohko.app.has_session&&this.bind(["username"],{from:ohko.app.current_user}),this.floating_button_pressed=ko.observable(!1),this.floating_button_pressed_and_visible=ko.computed(function(a){return function(){return a.floating_button_pressed()&&a.floating_button_visible()}}(this))}return __extends(c,b),c.prototype.section_tab_is=function(a){return this.section()===a},c.prototype.onOpenFloatingButton=function(){return this.floating_button_pressed(!0)},c.prototype.onCloseFloatingButton=function(){return this.floating_button_pressed(!1)},c.prototype.onToggleFloatingButton=function(){return this.floating_button_pressed(!this.floating_button_pressed())},c.prototype.onBackHistory=function(){return a.history.back()},c.prototype.onKeyPress=function(a,b){return 13===b.keyCode&&(this.onSearch(),$(ohko).blur()),!0},c}(ohko.ViewModel),a.ohko.NavigationViewModel=ohko.NavigationViewModel}(window);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){ohko.PageViewModel=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.is_authenticable=function(){return this.bind(["authenticated"],{from:ohko.app.session}),this.bind(["username","full_name"],{from:ohko.app.current_user,namespace:"user"}),this.current_user_changed=kb.triggeredObservable(ohko.app.current_user,"change")},c.prototype.onBackHistory=function(){return a.history.back()},c}(ohko.ViewModel),a.ohko.PageViewModel=ohko.PageViewModel}(window);